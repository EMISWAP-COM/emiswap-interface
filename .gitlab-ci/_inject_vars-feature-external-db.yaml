emirex_charts:
  app:
  - emiswap-oracle
  - emiswap-ui
  - emiswap-nft
  - emiswap-landing


inject_vars:
  emiswap-ui:
    fullnameOverride: emiswap-ui
    image:
      repository: "{{ lookup('env', '_img_repo') }}/{{ lookup( 'env', '_img_name') }}"
      tag: "{{ lookup('env', '_img_tag') }}"
      pullPolicy: IfNotPresent
    imagePullSecrets:
      - name: "{{ lookup('env', 'CI_PROJECT_PATH_SLUG') }}"
    env_js: |
      window.env = {
        REACT_APP_CHAIN_ID: '42',
        REACT_APP_NETWORK_URL: 'https://kovan.infura.io/v3/2b7c5bba80094418abf5e746ba10dac0',
        REACT_APP_PORTIS_ID: '9db2fb8f-577f-4af1-8a50-20ebb262b115',
        REACT_APP_FORTMATIC_KEY: 'pk_test_503A6AA72877C8DE',
        REACT_APP_GOOGLE_ANALYTICS_ID: '251318938',
        REACT_APP_EMISWAP_VAULT_ADDRESS: '0xe5f877477c7e8fff8e7c3162ec07f53c458fe472',
        REACT_APP_EMISWAP_FACTORY_ADDRESS: '0xb9Cba89F4caFa60f9040D6d495a56344F37EBA23',
        REACT_APP_UNISWAP_V2_FACTORY_ADDRESS: '0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f',
        REACT_APP_UNISWAP_V2_HELPER_ADDRESS: '0xd9145CCE52D386f254917e481eB44e9943F39138',
        REACT_APP_MIGRATOR_ADDRESS: '0x1C9E6cf5a0559CE498AB3A67364840024fA76F87',
        REACT_APP_EMISWAP_CROWDSALE_ADDRESS: '0x1EFB4629Cb9aDDF1D8EC9AE397dcE5736273CB59',
        REACT_APP_EMISWAP_VESTING_ADDRESS: '0x67C32CC1276392846c1a859697dB8bCFc0c7D0C8',
        REACT_APP_ESW_ID: '0xb2C5E8b761c03AfaDcF848020F1A9e7c4E58dB04',
        REACT_APP_ANALYTICS_URL: 'https://moon.firstbridge.online/',
        REACT_APP_CODE_LINK: 'https://github.com/EMISWAP-COM',
        REACT_APP_PUBLIC_URL: 'https://{{ env_fqdn }}',
        REACT_APP_MIN_GAS_FOR_SWAP: '320000',
        REACT_APP_MIN_GAS_FOR_POOL: '320000',
        REACT_APP_MIN_GAS_FOR_INVEST: '90000',
        REACT_APP_EMI_ROUTER_MAINNET: '0xBA2398194721b292Ff628Faa782Cf22E924D365D',
        REACT_APP_EMI_ROUTER_ROPSTEN: '0xe5c8e363de97840d5996e1e8db8b5facda0f1e21',
        REACT_APP_EMI_ROUTER_RINKEBY: '0xe5c8e363de97840d5996e1e8db8b5facda0f1e21',
        REACT_APP_EMI_ROUTER_GÃ–RLI: '0xe5c8e363de97840d5996e1e8db8b5facda0f1e21',
        REACT_APP_EMI_ROUTER_KOVAN: '0x3c756Eed6DC66F7013923AC50aB236111a9494bD',
        REACT_APP_EMI_VAMP: '0x09aff00ed78b18dcd5cbd444a563e9329f459c7a',
        REACT_APP_ESW_CLAIM_API: 'https://sign.emiswap.com',
        REACT_APP_ESW_CLAIM_CHAIN_ID: 'ETH_KV'
      };

  emiswap-oracle:
    fullnameOverride: emiswap-oracle
    image:
      repository: registry.gitlab.com/emidao/emiswap/oracle/emiswap-oracle-development
      tag: latest
      pullPolicy: Always
    imagePullSecrets:
      - name: gitlab-foreign-project-registry

  emiswap-nft:
    image:
      repository: registry.gitlab.com/emidao/emiswap/eminft/eminft-development
      tag: latest
      pullPolicy: Always
    imagePullSecrets:
      - name: gitlab-foreign-project-registry
    basePath: /magic_cards
    ingress:
      hosts:
        - host: '{{ env_fqdn }}'
          paths:
            - /magic_cards

  emiswap-oracle:
    fullnameOverride: emiswap-oracle
    image:
      repository: registry.gitlab.com/emidao/emiswap/oracle/emiswap-oracle-production
      tag: fa8a1a56
      pullPolicy: Always
    imagePullSecrets:
      - name: gitlab-foreign-project-registry
    env:
      app_bugsnag_token: "9df906f1f861575615450187642a267e"
      start_block_number: 22794339
      app_db_url: postgresql://postgres:staging@db-emi-master.staging.emirex.co/emiswap-oracle-db
      app_blockchain_block_confirmation: 6
      app_blockchain_block_start_number: 22794339
      app_blockchain_block_limit_save: 100
      app_blockchain_block_num_threads: 15
      app_blockchain_block_events_load_limit: 1000
      app_blockchain_block_events_load_threads: 15
      app_db_timeout: 60
      app_db_pool_timeout: 60
      app_db_max_connections: 25
      app_env: development
      app_contracts_emi_price: '0x80807258d5b507b3e07a17048df72324627b0a5b'
      app_contracts_esw: '0xb2c5e8b761c03afadcf848020f1a9e7c4e58db04'
      app_pool_exchange_launch_date: '2021-03-31T00:00:00+00:00'
    ingress:
      hosts:
      - host: "{{ env_fqdn }}"
        paths:
        - /v1
        - /api/v2
    workers:
      blockchain_block_events:
        cmd: ['bundle','exec','rake', 'workers:run[blockchain_block_events]']
        resources:
          requests: { cpu: 0.05, memory: '256Mi' }
          limits: { cpu: 0.5, memory: '768Mi' }
      blockchain_block:
        cmd: ['bundle','exec','rake', 'workers:run[blockchain_block]']
        resources:
          requests: { cpu: 0.05, memory: '256Mi' }
          limits: { cpu: 0.5, memory: '768Mi' }
      blockchain_event:
        cmd: ['bundle','exec','rake', 'workers:run[blockchain_event]']
        resources:
          requests: { cpu: 0.05, memory: '256Mi' }
          limits: { cpu: 0.5, memory: '768Mi' }
      rates_creator:
        cmd: ['bundle','exec','rake', 'workers:run[rates_creator]']
        resources:
          requests: { cpu: 0.05, memory: '256Mi' }
          limits: { cpu: 0.5, memory: '768Mi' }
      gas_tracker:
        cmd: ['bundle','exec','rake', 'workers:run[gas_tracker]']
        resources:
          requests: { cpu: 0.05, memory: '256Mi' }
          limits: { cpu: 0.5, memory: '768Mi' }
      pool_balancer:
        cmd: [ 'bundle','exec','rake', 'workers:run[pool_balancer]' ]
        resources:
          requests: { cpu: 0.05, memory: '256Mi' }
          limits: { cpu: 0.5, memory: '768Mi' }
      pool_block_bonus_payments:
        cmd: [ 'bundle','exec','rake', 'workers:run[pool_block_bonus_payments]' ]
        resources:
          requests: { cpu: 0.05, memory: '256Mi' }
          limits: { cpu: 0.5, memory: '768Mi' }
      exchanges_updater:
        cmd: [ 'bundle','exec','rake', 'workers:run[exchanges_updater]' ]
        resources:
          requests: { cpu: 0.05, memory: '256Mi' }
          limits: { cpu: 0.5, memory: '768Mi' }
    seed:
      blockchains.yaml: |
        - name: Infura Emirex
          state: disabled
          priority: 3
          client: infura
          meta:
            project_id: b7c5bba80094418abf5e746ba10dac0
            token: 0dd7f7f3408c4e1896ef403f01871880
            network: kovan
        - name: Infura Alexander
          state: active
          priority: 2
          client: infura
          meta:
            project_id: 69f702a1b8434172badf1e984fe499c8
            token: f7f14520aaf8473597b92b127ecc1679
            network: kovan
        - name: Emirex eth-kovan staging node
          state: active
          priority: 1
          client: default
          meta:
            base_uri: http://eth1.staging.emirex.co:8545
      tokens.yaml: |
        - name: ESW
          contract_address: '0x0000000000000000000000000000000000000000'
          precisions: 18
          type: system
        - name: DAI
          contract_address: '0x0000000000000000000000000000000000000001'
          precisions: 5
          type: system
        - name: WETH
          contract_address: '0x440eb39ecfe6df3a5dcaec7d9d0a16c875ebd77f'
          precisions: 5
          type: deployed
        - name: MockWBTC
          contract_address: '0x7ddb125b0e5bfe795e7293cc7e2882cb7e68ad12'
          precisions: 8
          type: registered
        - name: MockUSDC
          contract_address: '0x5a89afefb5e3912d81f90ea2c4844553e979baff'
          precisions: 6
          type: registered
        - name: MockEMRX
          contract_address: '0xbc77f75e2150c11f45f9ce783fd53dc1383537f7'
          precisions: 8
          type: registered
        - name: DAI
          contract_address: '0xe380b174d75974fd6f425b0a0e9c8489890cd8f9'
          precisions: 18
          type: registered
        - name: WETH
          contract_address: '0x440eb39ecfe6df3a5dcaec7d9d0a16c875ebd77f'
          precisions: 18
          type: registered

